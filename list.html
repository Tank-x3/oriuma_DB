<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character List | Oriuma DB</title>
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&family=Nunito:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* List page specific styles handled in style.css */
    </style>
</head>

<body>

    <div class="container fade-in">
        <header>
            <div class="header-logo">
                <h1><a href="index.html">🐎 Oriuma DB</a></h1>
            </div>
            <nav>
                <a href="list.html">List</a>
                <a href="register.html">Register</a>
                <a href="about.html">About</a>
                <button id="theme-toggle" class="btn-icon">🌙</button>
            </nav>
        </header>
        <div id="news-ticker">
            <!-- News injected here -->
        </div>

        <div class="header-card">
            <h2>キャラクター一覧</h2>
            <p>登録されているオリウマ娘たちを表示します。</p>
        </div>



        <div class="search-area-wrapper" style="max-width: 800px; margin: 0 auto 20px;">
            <details class="search-accordion">
                <summary>🔍 タグで検索・絞り込み</summary>
                <div class="search-content">
                    <div id="search-tags-loading" class="text-center">ロード中...</div>
                    <div id="search-tags-container">
                        <!-- JS injects search options here -->
                    </div>
                    <div class="text-center mt-3">
                        <button id="btn-clear-search" class="btn btn-secondary btn-sm">検索条件をクリア</button>
                    </div>
                </div>
            </details>
        </div>

        <main>
            <div id="loading-view" class="text-center" style="margin: 3rem 0;">
                <p>読み込み中...</p>
            </div>

            <div id="character-grid" class="char-grid">
                <!-- JS via callAPI('getList') -->
            </div>

            <div class="mt-4 text-center">
                <a href="register.html" class="btn btn-primary">＋ 新規登録</a>
                <br><br>
                <a href="index.html" class="btn-link">トップへ戻る</a>
            </div>
        </main>

        <!-- Detail Modal -->
        <div id="char-modal" class="modal-overlay" style="display: none;">
            <div class="modal-content fade-in-up">
                <button id="modal-close-btn" class="close-btn">&times;</button>
                <div id="modal-body">
                    <!-- JS injects here -->
                </div>
                <div class="modal-footer text-center">
                    <button class="btn btn-secondary close-modal-trigger">閉じる</button>
                    <button id="btn-modal-edit" class="btn btn-primary">📝 編集する</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Guest Tag Edit Modal -->
    <div id="guest-tag-modal" class="modal-overlay" style="display: none; z-index: 2000;">
        <div class="modal-content fade-in-up" style="max-width: 500px;">
            <div class="modal-header-area">
                <h3>🏷️ タグ編集 (閲覧者用)</h3>
            </div>
            <div style="padding: 15px;">
                <p style="font-size: 0.9rem; color: #666; margin-bottom: 10px;">
                    どなたでもタグを追加・削除できます（ロックされたタグを除く）。
                </p>
                <div id="guest-tag-editor-container">
                    <!-- JS injects tags here -->
                </div>
                <div class="form-group" style="margin-top: 15px;">
                    <input type="text" id="guest-new-tag-input" class="form-control" placeholder="新しいタグを入力...">
                    <button id="btn-add-guest-tag" class="btn btn-secondary btn-sm" style="margin-top: 5px;">追加</button>
                </div>
            </div>
            <div class="modal-footer text-center">
                <button id="btn-save-guest-tags" class="btn btn-primary">保存する</button>
                <button id="btn-cancel-guest-tags" class="btn btn-link">キャンセル</button>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 Oriuma Project</p>
    </footer>
    </div>

    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/main.js"></script>
    <script src="js/list.js"></script>

</body>

</html>